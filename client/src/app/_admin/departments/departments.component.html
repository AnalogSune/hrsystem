<ng-template [ngIf]="departments!=undefined" [ngIfElse]="loading">
<div class="container" style="margin-left: 0;">
  <div class="row ">
    <div class="col">
      <mat-form-field class="mt-3" appearance="fill">
        <mat-label>Departments</mat-label>
      <mat-select [value]="department?.name || ''">
        <mat-option *ngFor="let department of departments" [value]="department.name" (click)="selectedDepartment(department)">{{department.name}}</mat-option>
      </mat-select>
      </mat-form-field>
    
    <button mat-raised-button type="button" class="manage" (click)="openDialog()">Add Department</button>
    <button mat-raised-button type="button" color="warn" class="manage" (click)="confirmDelete()">Delete Department</button>
    </div>
  </div>
</div>
  <table class="table table-striped table-borderless" style="max-width: 500px !important;" >
    <thead class="thead-light">
      <tr>
        <th >Role</th>
        <th></th>
      </tr>
    </thead>
    <tbody *ngIf="department != undefined">
      <tr *ngFor="let role of department.departmentRoles">
        <th class="align-middle">{{role.roleName}}</th>
        <th><button color="warn" mat-raised-button type="button" class="row float-right" (click)="confirmDeleteRole(role.id)">Delete</button></th>
      </tr>
      <tr>
        <th>
          <mat-form-field>
          <mat-label>Role Name</mat-label>
          <input [(ngModel)]="rolename" matInput required>
          </mat-form-field>
        </th>
        <th><button mat-raised-button type="button" class="row float-right btn-success" (click)="addRole()">Add Role</button></th>
      </tr>
    </tbody>
  </table>

  <!-- <div class="container">
<div class="container row">
  <div class="row">Departments</div>
  <div class="dropdown row ml-5" dropdown>
    <span class="mr-1">
    </span>
    <a class="dropdown-toggle" style="font-size: 140%;" dropdownToggle>
      <div *ngIf="department != undefined">{{department.name || ""}}</div>
    </a>
    <button type="button" class="btn btn-success row ml-2" (click)="deleteDepartment()">Delete</button>
    <div class="dropdown-menu mt-3" *dropdownMenu>
      <a *ngFor="let d of departments" class="dropdown-item" (click)="selectedDepartment(d)" style="color: black;"><i class="fa fa-user mr-1"></i>{{d.name}}</a>
    </div>
  </div>
</div>
<table class="table table-bordered" style="background-color: rgba(255, 255, 255, 0.192);">
  <thead *ngIf="department != undefined">
      <tr *ngFor="let role of department.departmentRoles">
        <th>{{role.roleName}}</th>
        <th><button type="button" class="btn btn-success row mr-5" (click)="deleteRole(role.id)">Delete</button></th>
      </tr>
  </thead>
  <div class="container row ml-1">
    <button type="button" class="btn btn-success row mr-5" (click)="addDepartment()">Add Department</button>
  <input type="text" name="name" [(ngModel)]="departmentname">
  </div>
  <div class="container row ml-1">
    <button type="button" class="btn btn-success row mr-5" (click)="addRole()">Add Role</button>
  <input type="text" name="name" [(ngModel)]="rolename">
  </div>
</table>
</div> -->
</ng-template>
<ng-template #loading><mat-spinner class="spinner"></mat-spinner></ng-template>